-- Gui to Lua
-- Version: 3.2

-- Instances:

local ScreenGui = Instance.new("ScreenGui")
local GUI = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TitleOfGUI = Instance.new("TextLabel")
local ScrollingFrame = Instance.new("ScrollingFrame")
local ToggleKey = Instance.new("TextLabel")
local WalkSpeedSlider = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local Handle = Instance.new("Frame")
local UICorner_3 = Instance.new("UICorner")
local TextLabel = Instance.new("TextLabel")
local InfJumpButton = Instance.new("TextButton")
local UICorner_4 = Instance.new("UICorner")
local FlyButton = Instance.new("TextButton")
local UICorner_5 = Instance.new("UICorner")
local dragbox = Instance.new("Frame")

--Properties:

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = False

GUI.Name = "GUI"
GUI.Parent = ScreenGui
GUI.AnchorPoint = Vector2.new(0.5, 0.5)
GUI.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
GUI.BorderColor3 = Color3.fromRGB(0, 0, 0)
GUI.BorderSizePixel = 0
GUI.Position = UDim2.new(0.5, 0, 0.5, 0)
GUI.Size = UDim2.new(0, 588, 0, 407)

UICorner.CornerRadius = UDim.new(0, 24)
UICorner.Parent = GUI

TitleOfGUI.Name = "Title Of GUI"
TitleOfGUI.Parent = GUI
TitleOfGUI.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TitleOfGUI.BackgroundTransparency = 100.000
TitleOfGUI.BorderColor3 = Color3.fromRGB(0, 0, 0)
TitleOfGUI.BorderSizePixel = 0
TitleOfGUI.Size = UDim2.new(0, 433, 0, 76)
TitleOfGUI.Font = Enum.Font.DenkOne
TitleOfGUI.Text = "Slappy's Universal GUI"
TitleOfGUI.TextColor3 = Color3.fromRGB(180, 180, 180)
TitleOfGUI.TextSize = 48.000

ScrollingFrame.Parent = GUI
ScrollingFrame.Active = true
ScrollingFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScrollingFrame.BackgroundTransparency = 100.000
ScrollingFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
ScrollingFrame.BorderSizePixel = 0
ScrollingFrame.Position = UDim2.new(0, 0, 0.186732188, 0)
ScrollingFrame.Size = UDim2.new(0, 588, 0, 331)
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 3, 0)

ToggleKey.Name = "ToggleKey"
ToggleKey.Parent = ScrollingFrame
ToggleKey.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleKey.BackgroundTransparency = 100.000
ToggleKey.BorderColor3 = Color3.fromRGB(0, 0, 0)
ToggleKey.BorderSizePixel = 0
ToggleKey.Position = UDim2.new(0.0300000254, 0, -0.00181648741, 0)
ToggleKey.Size = UDim2.new(0, 228, 0, 50)
ToggleKey.Font = Enum.Font.Merriweather
ToggleKey.Text = "Press RightCtrl To Toggle GUI"
ToggleKey.TextColor3 = Color3.fromRGB(180, 180, 180)
ToggleKey.TextSize = 18.000

WalkSpeedSlider.Name = "WalkSpeedSlider"
WalkSpeedSlider.Parent = ScrollingFrame
WalkSpeedSlider.BackgroundColor3 = Color3.fromRGB(32, 32, 32)
WalkSpeedSlider.BorderColor3 = Color3.fromRGB(0, 0, 0)
WalkSpeedSlider.BorderSizePixel = 0
WalkSpeedSlider.Position = UDim2.new(0.0300000254, 0, 0.0570250899, 0)
WalkSpeedSlider.Size = UDim2.new(0, 539, 0, 52)

UICorner_2.Parent = WalkSpeedSlider

Handle.Name = "Handle"
Handle.Parent = WalkSpeedSlider
Handle.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
Handle.BorderColor3 = Color3.fromRGB(0, 0, 0)
Handle.BorderSizePixel = 0
Handle.Position = UDim2.new(0.010251415, 0, 0.192307696, 0)
Handle.Size = UDim2.new(0, 32, 0, 32)

UICorner_3.CornerRadius = UDim.new(0, 100)
UICorner_3.Parent = Handle

TextLabel.Parent = WalkSpeedSlider
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 100.000
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0, 0, 0.0192307699, 0)
TextLabel.Size = UDim2.new(0, 538, 0, 50)
TextLabel.Font = Enum.Font.DenkOne
TextLabel.Text = "Slider Walkspeed"
TextLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
TextLabel.TextSize = 28.000

InfJumpButton.Name = "InfJumpButton"
InfJumpButton.Parent = ScrollingFrame
InfJumpButton.BackgroundColor3 = Color3.fromRGB(32, 32, 32)
InfJumpButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
InfJumpButton.BorderSizePixel = 0
InfJumpButton.Position = UDim2.new(0.0282995515, 0, 0.110416286, 0)
InfJumpButton.Size = UDim2.new(0, 539, 0, 52)
InfJumpButton.Font = Enum.Font.DenkOne
InfJumpButton.Text = "Toggle Infinite Jump"
InfJumpButton.TextColor3 = Color3.fromRGB(180, 180, 180)
InfJumpButton.TextSize = 28.000

UICorner_4.Parent = InfJumpButton

FlyButton.Name = "FlyButton"
FlyButton.Parent = ScrollingFrame
FlyButton.BackgroundColor3 = Color3.fromRGB(32, 32, 32)
FlyButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
FlyButton.BorderSizePixel = 0
FlyButton.Position = UDim2.new(0.0280000009, 0, 0.163000003, 0)
FlyButton.Size = UDim2.new(0, 539, 0, 52)
FlyButton.Font = Enum.Font.DenkOne
FlyButton.Text = "Toggle Fly"
FlyButton.TextColor3 = Color3.fromRGB(180, 180, 180)
FlyButton.TextSize = 28.000

UICorner_5.Parent = FlyButton

dragbox.Name = "dragbox"
dragbox.Parent = GUI
dragbox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
dragbox.BackgroundTransparency = 100.000
dragbox.BorderColor3 = Color3.fromRGB(0, 0, 0)
dragbox.BorderSizePixel = 0
dragbox.Size = UDim2.new(0, 588, 0, 69)

-- Scripts:

local function OYVAE_fake_script() -- ScreenGui.Toggle 
	local script = Instance.new('LocalScript', ScreenGui)

	-- LocalScript (place inside your ScreenGui)
	local UserInputService = game:GetService("UserInputService")
	local TweenService = game:GetService("TweenService")
	
	local ScreenGui = script.Parent
	local TOGGLE_KEY = Enum.KeyCode.RightControl -- change if needed
	local TWEEN_TIME = 0.25 -- seconds for fade
	
	-- Properties to tween
	local TRANSPARENCY_PROPS = {
		"BackgroundTransparency",
		"ImageTransparency",
		"TextTransparency",
		"TextStrokeTransparency"
	}
	
	-- Store original transparency values
	local original = {}
	
	-- Record originals
	local function recordOriginals()
		for _, obj in ScreenGui:GetDescendants() do
			for _, prop in TRANSPARENCY_PROPS do
				local ok, val = pcall(function() return obj[prop] end)
				if ok and val ~= nil then
					original[obj] = original[obj] or {}
					original[obj][prop] = val
				end
			end
		end
	end
	
	-- Tween a single object
	local function tweenObject(obj, target)
		if original[obj] then
			for prop, orig in original[obj] do
				local goal = {}
				goal[prop] = target and 1 or orig -- fade out to 1, fade in to original
				local tween = TweenService:Create(obj, TweenInfo.new(TWEEN_TIME, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal)
				tween:Play()
			end
		end
	end
	
	-- Fade all descendants
	local function fadeAll(fadeOut)
		for _, obj in ipairs(ScreenGui:GetDescendants()) do
			tweenObject(obj, fadeOut)
		end
	end
	
	-- Toggle
	local isEnabled = true
	local function toggleGUI()
		if isEnabled then
			-- Fade out
			fadeAll(true)
			wait(TWEEN_TIME)
			ScreenGui.Enabled = false
		else
			-- Enable first
			ScreenGui.Enabled = true
			wait(0.01) -- small delay to prevent flicker
			fadeAll(false)
		end
		isEnabled = not isEnabled
	end
	
	-- Setup
	recordOriginals()
	
	-- Listen for key
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if gameProcessed then return end
		if input.KeyCode == TOGGLE_KEY then
			toggleGUI()
		end
	end)
	
end
coroutine.wrap(OYVAE_fake_script)()
local function DGDFL_fake_script() -- Handle.LocalScript 
	local script = Instance.new('LocalScript', Handle)

	local Players = game:GetService("Players")
	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	
	local handle = script.Parent
	local slider = handle.Parent
	local mouse = player:GetMouse()
	
	local dragging = false
	local sliderWidth = slider.AbsoluteSize.X
	local minSpeed = 1      -- minimum WalkSpeed
	local maxSpeed = 500    -- maximum WalkSpeed
	
	-- Create a TextLabel inside the handle if it doesn't exist
	local label = handle:FindFirstChild("TextLabel")
	if not label then
		label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, 0, 1, 0)
		label.BackgroundTransparency = 1
		label.TextColor3 = Color3.new(1,1,1)
		label.TextScaled = true
		label.Parent = handle
	end
	
	-- Function to update handle label
	local function updateLabel(speed)
		label.Text = math.floor(speed)
	end
	updateLabel(humanoid.WalkSpeed)
	
	-- Begin dragging
	handle.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
		end
	end)
	
	-- Stop dragging
	handle.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
	
	-- Update handle position and WalkSpeed while dragging
	mouse.Move:Connect(function()
		if dragging then
			local mousePos = mouse.X
			local sliderPos = slider.AbsolutePosition.X
			local newX = math.clamp(mousePos - sliderPos, 0, sliderWidth)
			handle.Position = UDim2.new(0, newX, 0, 0)
	
			-- Set WalkSpeed based on handle position
			local speed = minSpeed + (newX / sliderWidth) * (maxSpeed - minSpeed)
			humanoid.WalkSpeed = speed
	
			-- Update handle label
			updateLabel(speed)
		end
	end)
	
end
coroutine.wrap(DGDFL_fake_script)()
local function XEPIG_fake_script() -- InfJumpButton.LocalScript 
	local script = Instance.new('LocalScript', InfJumpButton)

	local UserInputService = game:GetService("UserInputService")
	local Players = game:GetService("Players")
	local player = Players.LocalPlayer
	
	local button = script.Parent
	local isActive = false
	local infJump
	local infJumpDebounce = false
	
	-- Function to enable infinite jump
	local function enableInfJump()
		if infJump then infJump:Disconnect() end
		infJumpDebounce = false
		infJump = UserInputService.JumpRequest:Connect(function()
			if not infJumpDebounce then
				infJumpDebounce = true
				local humanoid = player.Character and player.Character:FindFirstChildWhichIsA("Humanoid")
				if humanoid then
					humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
				end
				wait()
				infJumpDebounce = false
			end
		end)
		button.Text = "INFINITE JUMP: ON"
	end
	
	-- Function to disable infinite jump
	local function disableInfJump()
		if infJump then infJump:Disconnect() end
		infJumpDebounce = false
		button.Text = "INFINITE JUMP: OFF"
	end
	
	-- Toggle on button click
	button.MouseButton1Click:Connect(function()
		isActive = not isActive
		if isActive then
			enableInfJump()
		else
			disableInfJump()
		end
	end)
	
	-- Set initial button text
	button.Text = "INFINITE JUMP: OFF"
	
end
coroutine.wrap(XEPIG_fake_script)()
local function DZVQZF_fake_script() -- FlyButton.LocalScript 
	local script = Instance.new('LocalScript', FlyButton)

	local Players = game:GetService("Players")
	local UserInputService = game:GetService("UserInputService")
	local RunService = game:GetService("RunService")
	
	local player = Players.LocalPlayer
	local button = script.Parent
	
	local FLYING = false
	local QEfly = true
	local flySpeed = 1
	local flyConnectionDown
	local flyConnectionUp
	local flyToggleConnection
	
	-- Get the character's root
	local function getRoot(char)
		return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
	end
	
	-- Start flying
	local function startFly()
		local char = player.Character or player.CharacterAdded:Wait()
		local humanoid = char:FindFirstChildOfClass("Humanoid") or char:WaitForChild("Humanoid")
		local root = getRoot(char)
	
		if flyConnectionDown then flyConnectionDown:Disconnect() end
		if flyConnectionUp then flyConnectionUp:Disconnect() end
	
		local CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
		local lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
		local SPEED = 0
	
		local BG = Instance.new("BodyGyro")
		local BV = Instance.new("BodyVelocity")
		BG.P = 9e4
		BG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
		BG.CFrame = root.CFrame
		BG.Parent = root
		BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
		BV.Velocity = Vector3.new(0,0,0)
		BV.Parent = root
	
		FLYING = true
		humanoid.PlatformStand = true
	
		flyConnectionDown = UserInputService.InputBegan:Connect(function(input)
			local camera = workspace.CurrentCamera
			if input.KeyCode == Enum.KeyCode.W then
				CONTROL.F = flySpeed
			elseif input.KeyCode == Enum.KeyCode.S then
				CONTROL.B = -flySpeed
			elseif input.KeyCode == Enum.KeyCode.A then
				CONTROL.L = -flySpeed
			elseif input.KeyCode == Enum.KeyCode.D then
				CONTROL.R = flySpeed
			elseif input.KeyCode == Enum.KeyCode.E and QEfly then
				CONTROL.Q = flySpeed*2
			elseif input.KeyCode == Enum.KeyCode.Q and QEfly then
				CONTROL.E = -flySpeed*2
			end
		end)
	
		flyConnectionUp = UserInputService.InputEnded:Connect(function(input)
			if input.KeyCode == Enum.KeyCode.W then
				CONTROL.F = 0
			elseif input.KeyCode == Enum.KeyCode.S then
				CONTROL.B = 0
			elseif input.KeyCode == Enum.KeyCode.A then
				CONTROL.L = 0
			elseif input.KeyCode == Enum.KeyCode.D then
				CONTROL.R = 0
			elseif input.KeyCode == Enum.KeyCode.E then
				CONTROL.Q = 0
			elseif input.KeyCode == Enum.KeyCode.Q then
				CONTROL.E = 0
			end
		end)
	
		-- Update loop
		flyToggleConnection = RunService.RenderStepped:Connect(function()
			if not FLYING then return end
			local camera = workspace.CurrentCamera
			if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0 then
				SPEED = 50
			else
				SPEED = 0
			end
	
			BV.Velocity = ((camera.CFrame.LookVector * (CONTROL.F + CONTROL.B)) +
				((camera.CFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - camera.CFrame.p)) * SPEED
			BG.CFrame = camera.CFrame
		end)
	end
	
	-- Stop flying
	local function stopFly()
		FLYING = false
		if flyConnectionDown then flyConnectionDown:Disconnect() end
		if flyConnectionUp then flyConnectionUp:Disconnect() end
		if flyToggleConnection then flyToggleConnection:Disconnect() end
	
		local char = player.Character
		if char then
			local humanoid = char:FindFirstChildOfClass("Humanoid")
			if humanoid then humanoid.PlatformStand = false end
			local root = getRoot(char)
			if root then
				for _, child in ipairs(root:GetChildren()) do
					if child:IsA("BodyVelocity") or child:IsA("BodyGyro") then
						child:Destroy()
					end
				end
			end
		end
	end
	
	-- Toggle button
	button.Text = "FLY: OFF"
	button.MouseButton1Click:Connect(function()
		if FLYING then
			stopFly()
			button.Text = "FLY: OFF"
		else
			startFly()
			button.Text = "FLY: ON"
		end
	end)
	
end
coroutine.wrap(DZVQZF_fake_script)()
local function AERZHFA_fake_script() -- dragbox.LocalScript 
	local script = Instance.new('LocalScript', dragbox)

	-- LocalScript inside DragBox
	
	local UserInputService = game:GetService("UserInputService")
	local DragBox = script.Parent
	local GUI = DragBox.Parent
	
	local dragging = false
	local dragStart = Vector2.new()
	local startPos = UDim2.new()
	
	DragBox.Active = true -- ensure it can detect input
	
	-- Function to move GUI
	local function update(input)
		local delta = input.Position - dragStart
		GUI.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
	
	-- Start dragging
	DragBox.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = GUI.Position
	
			-- Stop dragging
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	-- Move GUI while dragging
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			update(input)
		end
	end)
	
end
coroutine.wrap(AERZHFA_fake_script)()
